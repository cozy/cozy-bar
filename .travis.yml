dist: focal
language: node_js
node_js:
  - 16
env:
  global:
    # NPM_TOKEN (mycozycloud)
    - secure: "Z1z9aIqfmUzHrg/WzDJ4IJjnTWTjJx/3HrcBmYfqqfiu3Pgo1Bc1sh2p/dJoYJP+6vg9HkMc2sFrsPy9FtVa67a0QoHEgOq6mdcwEFP1cG5LPRdZTuSMe/j4+UcxvcghE/ilIcFPUmD4aryWhW3i8VdKochLYSU01Ktyyw+JLcAv0cSnotkKlv1MPVAFvhbFo/xu/yVJxDhAvvEXGQuR21GOM42nJachauERdtjJAf8HZDN4NI1n08ESowICfh0m4iyodnjKHgIx+kydmrEF3Viu/d2Onj3nFUiUMOgDdwS0ZimZ9YfwatuZI8spSwmJFevsgi5g5HAhBE7CUAr3Onw0rZXTSe5PPkb5QGw+zCXEAU8RLzj76l5bl/3+/PA3vrKr2eRT7Sp0DPS/NC6xyzNJpWu74ey8tBqmgh1aZoW5dcvjM1OtkFgMaVKzxlsUUG/RIgXNKloO2ZuUF4pw/ASLu82HghwpMNDe+RcsVENe+kekkoA63LGASUmMqEJVLFwynzFK04TPcCs6t2Pb+J2485FbvTqYzCPf69YYSXLub33vrs9N3VrybXfRl71B+af6qs6rNqMe30HxomISY5CfJEfN2kgI92NELnLCr1Qcses4QLXIJHDukTVFWiEA/Pinsk5NHyDZIw4ZONbjE1WBXu8OCTMlgH426p0xrVU="
    # GH_TOKEN (cozy-bot)
    - secure: "sJCHHhxwzhYBHvTj1w6v+yFcvP7RhqkW/WwEYivsOl272WHI1hDloEx0vOQ9HfJemCTCtOxxkCWaaSHl5fYWOT7kGgRyyANK04rBkQUnZbgNIWrf0YaNUiP6kH39wFfoko+pYiDzXhS0BenURRynKycwtUpT/MjmNOdENtRrZZUGEKPxowwSrxFEwsTQuRSeC4+oDHVR4A+X0ZZ1b0x9iST8jwKStGRDnNMmn0X6oTJCa+96toDxFEQDAmCU8zvibQLMmRPUzqGglX7XuSCVaQdAdaMNANb/xb+v+jQTm0+5CBb9F8rUgxdrEjSOg0pKreslSTRpieU9UXDHKvp2x8oEhC6NR4i9Fb+FR7nsjad5cr6h0yeAF6O6ziLWPKT15x8LNSwcD8NPPDUyOVIXjAaoJfkMqvPEQfKxlLXTuyufAlCWqnK9ZioZsJFrE8P1mwB66qEfZ3zKfPoIRAujFqfOUi4CS6ND+TXZYwkRRtuuV1UbXAZ0I6ZyO8VeFFkB/olEl+RFbGOLIAWpjsJCeF6xukgh/s/8b9I8vkXWzQ7+rErQK9F6HoB9RgDeMrJnH9iOYLprcJV+H3GXkmbOHa3V2huPm2pyrkGoHjDmH2htGwS9XsLvxFiuBj/X256nqSTOvb+qY4RUwCv0hwEi7PeS2B92RicjXE1i+SAxf8s="
cache:
  yarn: true
  directories:
    - node_modules
script:
  - ./scripts/travis.sh
before_deploy:
  - touch .npmignore
deploy:
  provider: script
  skip_cleanup: true
  script: yarn run semantic-release
  on:
    branch: master
    repo: cozy/cozy-bar
