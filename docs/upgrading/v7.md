# Migrate cozy-bar from v7 to v11

To migrate cozy-bar from v7 to v11, follow these steps:

1. Update the cozy-bar as a dependency instead of a devDependency in your project by running the following command:
   ```bash
   yarn remove cozy-bar --dev && yarn add cozy-bar@10.0.0
   ```

2. In development mode, the cozy-scripts was injecting cozy-bar JS and CSS. In your `package.json` you need to disable this injection of files by adding the `--barV7 false` option to the `build`, `start`, and `watch` commands.

3. In production, the cozy-stack replace `{{.CozyBar}}` with the JavaScript code to inject the cozy-bar. Make sure you remove all instances of `{{.CozyBar}}` from your `index.ejs` file.

4. Transform cozy-bar initialization into a component. Search for all instances of `cozy.bar` and replace them with the following code:
   ```jsx
   import { BarComponent } from 'cozy-bar'

   const App = () => {
       return (
           <Layout>
               <BarComponent />
           </Layout>
       )
   }
   ```

5. If you were using customs elements, wrap the `BarComponent` and your element into a `BarProvider`. Then, replace `{ BarLeft } = cozy.bar` with a direct import:
   ```jsx
   import { BarLeft } from 'cozy-bar'

   const Title = ({ title }) => {
       const { isMobile } = useBreakpoints()

       if(isMobile) {
           return (
               <BarLeft>{title}</BarLeft>
           )
       }
       return (
           <h2>{title}</h2>
       )
   }
   ```

6. Remove all the wrapped providers because cozy-bar can consume them directly.
